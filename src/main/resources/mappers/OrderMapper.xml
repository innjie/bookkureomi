<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.inyoon.bookkureomi.mapper.OrderMapper">
	<select id="getOrderList" parameterType="integer" resultType="com.inyoon.bookkureomi.domain.Order">
        SELECT 
			orderNo, saleNo, auctionNo, userNo, pAddress, orderDate, rAddress, rName, rPhone
		FROM 
			Orders <!-- Sale, Auction, User 추가 -->
		where
			userNo = #{userNo}
		ORDER BY
			orderNo
				
		<!--  paging
		SELECT
			F.*
		FROM
			(
			SELECT
				ROWNUM AS ROW_NUM, R.*
			FROM
				(
					SELECT 
						orderNo, saleNo, auctionNo, userNo, pAddress, orderDate, rAddress, rName, rPhone
					FROM 
						Orders <!-- Sale, Auction, User 추가 -->
					where
						userNo = #{userNo}
					ORDER BY
						orderNo
				) R ) F
		WHERE
			F.ROW_NUM BETWEEN #{start} and #{end}
		 --> 
    </select>
    
    <select id="getOrder" parameterType="integer" resultType="com.inyoon.bookkureomi.domain.Order">
        SELECT 
			orderNo, saleNo, auctionNo, userNo, pAddress, orderDate, rAddress, rName, rPhone
		FROM 
			Orders <!-- Sale, Auction, User 추가 -->
		where
			orderNo = #{orderNo}
    </select>
    
    <insert id="orderBook" parameterType="com.inyoon.bookkureomi.domain.Order">
    	Insert into Orders (orderNo, saleNo, auctionNo, userNo, pAddress, rAddress, rName, rPhone)
    	Values (#{orderNo}, #{sale.saleNo}, #{auction.auctionNo}, #{user.userNo}, #{pAddress}, #{rAddress}, #{rName}, #{rPhone})
    </insert>
</mapper>